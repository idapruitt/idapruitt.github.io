<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Click-to-Zoom & Drag-to-Pan Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f0f0f0;
      padding: 20px;
      text-align: center;
    }

    .viewer {
      position: relative;
      display: inline-block;
      overflow: hidden;
      width: 100%;
      max-width: 800px;
      height: 500px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: zoom-in;
      user-select: none;
    }

    .viewer.zoomed {
      cursor: grab;
    }

    .viewer.zoomed:active {
      cursor: grabbing;
    }

    .viewer img {
      position: absolute;
      top: 0;
      left: 0;
      transform-origin: top left;
      transition: transform 0.2s ease;
      user-select: none;
      pointer-events: none;
    }

    .thumbnails {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .thumbnails img {
      width: 100px;
      height: 70px;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid transparent;
      transition: border 0.3s;
    }

    .thumbnails img:hover {
      border-color: #4CAF50;
    }
  </style>
</head>
<body>

  <h1>Click to Zoom and Drag to Pan</h1>

  <div class="viewer" id="viewer">
    <img id="mainImage" src="images/photo1.jpg" alt="Main Image" />
  </div>

  <div class="thumbnails">
    <img src="images/photo1.jpg" onclick="loadImage('images/photo1.jpg')" />
    <img src="images/photo2.jpg" onclick="loadImage('images/photo2.jpg')" />
    <img src="images/photo3.jpg" onclick="loadImage('images/photo3.jpg')" />
  </div>

 <script>
  const viewer = document.getElementById('viewer');
  const image = document.getElementById('mainImage');

  let scale = 1;
  let translateX = 0;
  let translateY = 0;
  let isZoomed = false;

  let isDragging = false;
  let dragThreshold = 5;
  let dragStartedAt = { x: 0, y: 0 };
  let startX = null;
  let startY = null;

  function clampTranslation() {
    const viewerRect = viewer.getBoundingClientRect();
    const imageWidth = image.naturalWidth * scale;
    const imageHeight = image.naturalHeight * scale;

    const maxTranslateX = 0;
    const minTranslateX = viewerRect.width - imageWidth;
    const maxTranslateY = 0;
    const minTranslateY = viewerRect.height - imageHeight;

    translateX = Math.min(maxTranslateX, Math.max(minTranslateX, translateX));
    translateY = Math.min(maxTranslateY, Math.max(minTranslateY, translateY));
  }

  function applyTransform() {
    clampTranslation();
    image.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
  }

  viewer.addEventListener('mousedown', (e) => {
    if (!isZoomed) return;
    isDragging = false;
    dragStartedAt = { x: e.clientX, y: e.clientY };
    startX = e.clientX;
    startY = e.clientY;
  });

  viewer.addEventListener('mousemove', (e) => {
    if (!isZoomed || startX === null) return;

    const dxTotal = e.clientX - dragStartedAt.x;
    const dyTotal = e.clientY - dragStartedAt.y;

    if (!isDragging && (Math.abs(dxTotal) > dragThreshold || Math.abs(dyTotal) > dragThreshold)) {
      isDragging = true;
    }

    if (isDragging) {
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      translateX += dx;
      translateY += dy;
      startX = e.clientX;
      startY = e.clientY;
      applyTransform();
    }
  });

  viewer.addEventListener('mouseup', () => {
    startX = null;
    startY = null;
  });

  viewer.addEventListener('mouseleave', () => {
    startX = null;
    startY = null;
  });

  viewer.addEventListener('click', (e) => {
    if (isDragging) {
      isDragging = false;
      return;
    }

    isZoomed = !isZoomed;
    viewer.classList.toggle('zoomed', isZoomed);

    if (isZoomed) {
      scale = 2;
      const rect = viewer.getBoundingClientRect();
      const offsetX = e.clientX - rect.left;
      const offsetY = e.clientY - rect.top;
      translateX = rect.width / 2 - offsetX * scale;
      translateY = rect.height / 2 - offsetY * scale;
    } else {
      scale = 1;
      translateX = 0;
      translateY = 0;
    }

    applyTransform();
  });

  function loadImage(src) {
    image.src = src;
    isZoomed = false;
    scale = 1;
    translateX = 0;
    translateY = 0;
    viewer.classList.remove('zoomed');
    applyTransform();
  }

  // Wait for image to load before applying initial transform
  image.onload = applyTransform;
</script>


</body>
</html>
